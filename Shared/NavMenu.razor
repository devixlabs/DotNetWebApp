@inject ISpaSectionService SpaSections
@inject IOptions<AppCustomizationOptions> AppOptions
@inject IAppDictionaryService AppDictionary

<RadzenPanelMenu class="app-nav-menu" DisplayStyle="@MenuItemDisplayStyle.IconAndText" Multiple="false">
    <RadzenPanelMenuItem Text="@AppOptions.Value.Navigation.Home" Icon="home" Path="/" />
    <RadzenPanelMenuItem Text="@AppOptions.Value.Navigation.Application" Icon="apps" Expanded="true">
        @foreach (var item in SpaSections.Sections)
        {
            <RadzenPanelMenuItem Text="@item.NavLabel" Icon="@GetSectionIcon(item.Section)" Path="@GetSectionPath(item)" />
        }
    </RadzenPanelMenuItem>
    <RadzenPanelMenuItem Text="Data" Icon="table_chart" Expanded="true">
        @foreach (var entity in AppDictionary.AppDefinition.DataModel.Entities)
        {
            <RadzenPanelMenuItem Text="@entity.Name" Icon="data_object" Path="@entity.Name" />
        }
    </RadzenPanelMenuItem>
</RadzenPanelMenu>

@code {
    private static string GetSectionIcon(SpaSection section)
    {
        return section switch
        {
            SpaSection.Dashboard => "dashboard",
            SpaSection.Products => "inventory_2",
            SpaSection.Settings => "settings",
            _ => "apps"
        };
    }

    private static string GetSectionPath(SpaSectionInfo section)
    {
        return section.Section == SpaSection.Dashboard ? "app" : $"app/{section.RouteSegment}";
    }
}
